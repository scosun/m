<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <title>Android通信</title>
</head>
<body>
<div id="url">

</div>
<hr />
<div id="open">
    native参数：
</div>
<hr />
<div>
    点击直接调用JavascriptInterface绑定的函数H5JsStorage.showDetail("{'test':'123'}");
    <br />
    <button id="btn">详情</button>
</div>
<hr />
<div id="native">
    native响应：
</div>

<script>

    document.getElementById("url").innerHTML = "URL地址：" + location.href;

    // function getUrlParam(name) {
    //     var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
    //      var uri = decodeURI(window.location.search);
    //     var r = uri.substr(1).match(reg);  //匹配目标参数
    //     if (r != null) return r[2]; return null; //返回参数值
    // }
    
    // var pid = getUrlParam("id") || null;

    //native
    function onNetStatusChanged(str){
        document.getElementById("open").innerHTML = "native参数：" + str;
    }

    document.getElementById("btn").onclick = function(){
        var u = navigator.userAgent;
        var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //g
        var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        if (isAndroid) {
            //这个是安卓操作系统
            alert("android");
            if(typeof H5JsStorage != "undefined"){
                var msg = H5JsStorage.showDetail("{'test':'123'}");
                document.getElementById("native").innerHTML = "native响应：" + msg;
            }else{
                alert("H5JsStorage不存在");
            }
        }
        if (isIOS) {
        　　//这个是ios操作系统
            alert("ios");
            if(typeof webkit != "undefined"){
                if(typeof webkit.messageHandlers != "undefined"){
                    if(typeof webkit.messageHandlers.showDetail != "undefined"){
                        var msg = webkit.messageHandlers.showDetail.postMessage("{'test':'123'}");
                        document.getElementById("native").innerHTML = "native响应：" + msg;
                    }else{
                        alert("window.webkit.messageHandlers.showDetail不存在");
                    }
                }else{
                    alert("window.webkit.messageHandlers不存在");
                }
            }else{
                alert("window.webkit不存在");
            }
        }
    }
</script>
</body>
</html>